<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Something for You ‚ù§Ô∏è</title>

<style>

body{
margin:0;
padding:0;
background:#f3e4cf;
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
font-family:Georgia, serif;
overflow:hidden;
}

.card{
background:#e6a4b4;
width:800px;
max-width:95%;
padding:40px;
border-radius:20px;
box-shadow:0 20px 40px rgba(0,0,0,0.2);
text-align:center;
}

.hidden{display:none;}

.gift-container{
display:flex;
gap:30px;
justify-content:center;
}

.gift-box{
background:#f4c2cc;
width:180px;
height:150px;
border-radius:15px;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
cursor:pointer;
transition:.3s;
}

.gift-box:hover{
transform:scale(1.05);
}

.gift-box img{
width:70px;
margin-bottom:10px;
}

button{
background:red;
color:white;
border:none;
padding:12px 25px;
border-radius:25px;
cursor:pointer;
margin-top:15px;
max-width:100%;
width:auto;
}

/* quiz */

.quiz-box{
background:#f4c2cc;
padding:20px;
border-radius:15px;
width:400px;
margin:auto;
}

.option{
background:white;
padding:12px;
margin:10px 0;
border-radius:8px;
cursor:pointer;
}

.option:hover{
background:#ff4d6d;
color:white;
}

/* agreement */

.agreement-box{
background:#efeacb;
padding:20px;
border-radius:15px;
width:400px;
margin:auto;
text-align:left;
}

canvas{
border:2px solid #e6a4b4;
border-radius:10px;
background:white;
touch-action:none;
}

/* letter */

.letter-paper{
background:#efeacb;
width:90%;
max-width:600px;
height:60vh;
padding:25px;
border-radius:10px;
margin:auto;
font-family:cursive;
font-size:16px;
line-height:1.6;
overflow-y:auto;
white-space:pre-wrap;
text-align:left;
}

/* envelope */

.envelope{
width:200px;
height:130px;
background:#ffb6c1;
margin:auto;
cursor:pointer;
}

.flap{
width:100%;
height:100%;
background:#ff8fa3;
clip-path:polygon(0 0,100% 0,50% 60%);
transition:.5s;
}

.envelope.open .flap{
transform:rotateX(180deg);
}

/* popup */

.popup{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%) scale(0);
background:white;
padding:20px;
border-radius:15px;
transition:.3s;
z-index:1000;
}

.popup.show{
transform:translate(-50%,-50%) scale(1);
}

.overlay{
position:fixed;
width:100%;
height:100%;
background:rgba(0,0,0,.4);
display:none;
}

.overlay.show{
display:block;
}

/* petals */

.petal{
position:fixed;
top:-20px;
font-size:20px;
pointer-events:none;
animation:fall linear forwards;
z-index:999;
}

@keyframes fall{
to{
transform:translateY(110vh) rotate(360deg);
}
}

/* MOBILE FIX */

@media (max-width:600px){

.card{
width:90%;
padding:20px;
}

button{
width:90%;
max-width:300px;
}

.gift-container{
flex-direction:column;
align-items:center;
}

.quiz-box,
.agreement-box{
width:90%;
}

}

</style>
</head>
<body>

<div class="card">

<div id="giftPage">

<h1>Something for You ‚ù§Ô∏è</h1>

<div class="gift-container">

<div class="gift-box" onclick="openQuiz()">
<img src="tkthao219-bubududu.gif">
<p>Gift 1</p>
</div>

<div class="gift-box" onclick="openAgreement()">
<img src="bubu-bubu-dudu.gif">
<p>Gift 2</p>
</div>

<div class="gift-box" onclick="openLetterPage()">
<img src="bubu-dudu-sseeyall.gif">
<p>Gift 3</p>
</div>

</div>

<button onclick="openFinallyPage()">FINALLY ‚ù§Ô∏è</button>

</div>

<div id="quizPage" class="hidden">
<h1>Quiz for you ü•∫</h1>
<div class="quiz-box">
<p id="question"></p>
<div id="options"></div>
</div>
<button onclick="goBack()">‚Üê BACK</button>
</div>

<div id="agreementPage" class="hidden">

<h1>Forever Agreement üíç</h1>

<div class="agreement-box">

This Forever Marriage Agreement confirms that we belong to each other forever ‚ù§Ô∏è

<br><br>

I promise to love you endlessly üíñ  
<br>I promise to protect you always üõ°  
<br>I promise to stay loyal forever ü§ù  
<br>I promise to never leave you üíç  

<br><br>

Signature:

<canvas id="signaturePad" width="350" height="150"></canvas>

<br>

<button onclick="clearSignature()">Clear</button>
<button onclick="signAgreement()">Sign ‚ù§Ô∏è</button>

</div>

<button onclick="goBack()">‚Üê BACK</button>

</div>

<div id="letterPage" class="hidden">

<h1>A Letter For You ü•∫</h1>

<div id="envelopeContainer">

<div class="envelope" onclick="openEnvelope()">
<div class="flap"></div>
</div>

</div>

<div id="letterContent" class="letter-paper hidden">
<span id="letterText"></span>
</div>

<button onclick="goBack()">‚Üê BACK</button>

</div>

</div>

<div class="overlay" id="overlay"></div>

<div class="popup" id="popup">
<p id="popupText"></p>
<button onclick="closePopup()">OK ‚ù§Ô∏è</button>
</div>

<audio id="music" src="romantic.mp3" loop></audio>

<script>

/* navigation references */

const giftPage=document.getElementById("giftPage");
const quizPage=document.getElementById("quizPage");
const agreementPage=document.getElementById("agreementPage");
const letterPage=document.getElementById("letterPage");

const popup=document.getElementById("popup");
const overlay=document.getElementById("overlay");
const popupText=document.getElementById("popupText");

const music=document.getElementById("music");

function hideAll(){
giftPage.classList.add("hidden");
quizPage.classList.add("hidden");
agreementPage.classList.add("hidden");
letterPage.classList.add("hidden");
}

function goBack(){
music.pause();
hideAll();
giftPage.classList.remove("hidden");
}

/* popup */

function showPopup(msg){
popupText.innerText=msg;
popup.classList.add("show");
overlay.classList.add("show");
}

function closePopup(){
popup.classList.remove("show");
overlay.classList.remove("show");
}

/* signature */

let canvas=document.getElementById("signaturePad");
let ctx=canvas.getContext("2d");

let drawing=false;

function getPos(e){
let rect=canvas.getBoundingClientRect();
if(e.touches){
return{
x:e.touches[0].clientX-rect.left,
y:e.touches[0].clientY-rect.top
};
}
return{
x:e.clientX-rect.left,
y:e.clientY-rect.top
};
}

canvas.addEventListener("mousedown",start);
canvas.addEventListener("touchstart",start,{passive:false});

canvas.addEventListener("mousemove",draw);
canvas.addEventListener("touchmove",draw,{passive:false});

canvas.addEventListener("mouseup",stop);
canvas.addEventListener("touchend",stop);

function start(e){
drawing=true;
let pos=getPos(e);
ctx.beginPath();
ctx.moveTo(pos.x,pos.y);
}

function draw(e){
if(!drawing)return;
e.preventDefault();
let pos=getPos(e);
ctx.lineTo(pos.x,pos.y);
ctx.stroke();
}

function stop(){
drawing=false;
}

function clearSignature(){
ctx.clearRect(0,0,canvas.width,canvas.height);
}

function signAgreement(){

let data=ctx.getImageData(0,0,canvas.width,canvas.height).data;
let empty=true;

for(let i=0;i<data.length;i+=4){
if(data[i+3]!=0){
empty=false;
break;
}
}

if(empty)
showPopup("Sign first cutie ‚ù§Ô∏è");
else
showPopup("You Are Officially Mine Forever ‚ù§Ô∏è");

}

</script>

</body>
</html>
